<div id="servico-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden opacity-0 modal">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 relative max-h-[90vh] overflow-y-auto">
    <button id="close-servico-modal-button" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-3xl leading-none w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors" aria-label="Fechar">&times;</button>
    <h2 class="text-3xl font-bold text-gray-800 mb-6 font-playfair">Adicionar Servi√ßo</h2>
    <form id="servico-form" class="space-y-5">
      <div>
        <label for="servico-nome" class="block text-sm font-semibold text-gray-700 mb-2">Nome do Servi√ßo *</label>
        <input type="text" id="servico-nome" name="servico-nome" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all" placeholder="Ex: Corte e Escova" required>
      </div>

      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-3">Dura√ß√£o</label>
        <div class="flex items-center gap-4">
          <div class="flex-1">
            <input type="number" id="servico-duracao-horas" name="servico-duracao-horas" min="0" step="1" placeholder="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all" />
            <p class="mt-1 text-xs text-gray-500 font-medium">Horas</p>
          </div>
          <span class="text-xl text-gray-300">:</span>
          <div class="flex-1">
            <input type="number" id="servico-duracao-minutos" name="servico-duracao-minutos" min="0" max="59" step="5" placeholder="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all" />
            <p class="mt-1 text-xs text-gray-500 font-medium">Minutos</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="servico-custo" class="block text-sm font-semibold text-gray-700 mb-2">Custo (opcional)</label>
          <div class="flex gap-1">
            <select id="servico-custo-tipo" class="w-14 px-1 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] text-xs">
              <option value="absoluto">R$</option>
              <option value="percentual">%</option>
            </select>
            <input type="number" step="0.01" id="servico-custo" name="servico-custo" class="flex-1 min-w-0 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all" placeholder="0,00">
          </div>
          <p class="mt-1 text-xs text-gray-500">Custo de materiais</p>
        </div>
        <div>
          <label for="servico-margem" class="block text-sm font-semibold text-gray-700 mb-2">Margem (opcional)</label>
          <div class="relative">
            <input type="number" step="1" id="servico-margem" name="servico-margem" class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all pr-8" placeholder="40">
            <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm">%</span>
          </div>
          <p class="mt-1 text-xs text-gray-500">Margem de lucro</p>
        </div>
      </div>
      
      <div>
        <label for="servico-preco" class="block text-sm font-semibold text-gray-700 mb-2">Pre√ßo Final (R$) *</label>
        <div class="flex gap-2 items-center">
          <input type="number" step="0.01" id="servico-preco" name="servico-preco" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all" placeholder="0,00" required>
          <button type="button" id="calcular-preco-btn" class="px-3 py-2 text-xs font-semibold rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors whitespace-nowrap hidden">
            üîÑ Calcular
          </button>
        </div>
        <p class="mt-1 text-xs text-gray-500">Pre√ßo cobrado do cliente</p>
      </div>
      
      <div id="servico-lucro-info" class="hidden p-3 bg-green-50 border border-green-200 rounded-lg">
        <div class="flex items-center justify-between">
          <p class="text-sm text-green-700">
            üí∞ <strong>Lucro:</strong> <span id="servico-lucro-valor">R$ 0,00</span>
            <span class="text-green-600 text-xs ml-2">(<span id="servico-lucro-margem">0</span>% margem)</span>
          </p>
          <span id="servico-lucro-status" class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">√ìtimo</span>
        </div>
      </div>

      <div>
        <label for="servico-imagem" class="block text-sm font-semibold text-gray-700 mb-2">Imagem</label>
        <div class="relative">
          <input type="file" id="servico-imagem" name="servico-imagem" accept="image/*" class="w-full px-4 py-3 text-sm text-gray-600 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#b5879d] file:text-white hover:file:bg-[#9f6b7f] file:cursor-pointer file:transition-colors border border-gray-300 rounded-lg" />
        </div>
        <p class="mt-1 text-xs text-gray-500">Formatos aceitos: JPG, PNG, GIF (m√°x. recomendado: 5MB)</p>
      </div>

      <div>
        <label for="servico-descricao" class="block text-sm font-semibold text-gray-700 mb-2">Descri√ß√£o</label>
        <textarea id="servico-descricao" name="servico-descricao" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-[#b5879d] focus:border-transparent transition-all resize-none" placeholder="Descreva os detalhes do servi√ßo..."></textarea>
      </div>

      <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
        <div>
          <label for="servico-exibir-landing" class="text-sm font-semibold text-gray-700">Exibir na Landing Page</label>
          <p class="text-xs text-gray-500">Marque para mostrar este servi√ßo na p√°gina principal</p>
        </div>
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" id="servico-exibir-landing" name="servico-exibir-landing" class="sr-only peer" checked>
          <div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#b5879d] rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#b5879d]"></div>
        </label>
      </div>

      <div class="pt-6 flex justify-end gap-3 border-t">
        <button type="button" id="cancel-servico-modal-button" class="px-6 py-2 text-sm font-semibold rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors">Cancelar</button>
        <button type="submit" class="px-8 py-2 text-sm font-semibold rounded-lg btn-accent hover:opacity-90 transition-opacity">Salvar</button>
      </div>
    </form>
  </div>
</div>